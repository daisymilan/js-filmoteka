!function(){var t,e,n,i,o="api_key=b5e824a3d922f68ba211fcf6dbdcb6f5",a="https://api.themoviedb.org/3/discover/movie?sort_by-popularity.desc&"+o;n=null===JSON.parse(localStorage.getItem("movie-queue"))?[]:JSON.parse(localStorage.getItem("movie-queue")),localStorage.setItem("movie-queue",JSON.stringify(n)),i=null===JSON.parse(localStorage.getItem("movie-watched"))?[]:JSON.parse(localStorage.getItem("movie-watched")),localStorage.setItem("movie-watched",JSON.stringify(i));var s,c=document.getElementById("myModal"),d=document.getElementById("modal-poster"),l=document.getElementById("modal-title"),r=document.getElementById("modal-vote"),u=document.getElementById("modal-popularity"),m=document.getElementById("modal-original-title"),g=document.getElementById("modal-genre"),p=document.getElementById("modal-overview"),v=document.getElementById("addToWatchedBtn"),b=document.getElementById("addToQueuBtn"),f=document.getElementsByClassName("close")[0];function y(){c.style.display="none"}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5").then((function(t){return t.json()})).then((function(t){s=t.genres,N(a),_(t)})).catch((function(t){})),f.addEventListener("click",y),window.addEventListener("click",(function(t){t.target===c&&y()}));var h,L,E=document.getElementById("main"),I=document.getElementById("search-form"),S=document.getElementById("search-input"),B=document.querySelector(".loader-container"),k=1,x=document.getElementById("prev"),w=document.getElementById("next");function N(t){h=t,E.classList.toggle("is-hidden"),B.classList.toggle("is-hidden"),fetch(t).then((function(t){return t.json()})).then((function(t){console.log(t.results),0!==t.results.length?(_(t.results),k=t.page,E.classList.toggle("is-hidden"),B.classList.toggle("is-hidden"),function(){k<=1?(x&&x.classList.add("disabled"),w&&w.classList.remove("disabled")):k>=L?(x&&x.classList.remove("disabled"),w&&w.classList.add("disabled")):(x&&x.classList.remove("disabled"),w&&w.classList.remove("disabled"));x.addEventListener("click",(function(){0})),w.addEventListener("click",(function(){0}))}()):(E.classList.toggle("is-hidden"),B.classList.toggle("is-hidden"),E.innerHTML='<h1 class="no-results">No Results Found</h1>')}))}function _(n){E.innerHTML="",n.forEach((function(n){var i=n.title,o=n.poster_path,a=n.release_date,v=n.genre_ids,b=document.createElement("div");b.classList.add("movie");var f=v&&Array.isArray(s)?v.map((function(t){var e=s.find((function(e){return e.id===t}));return e?e.name:""})).join(", "):"";b.innerHTML='\n            <img src="'.concat(o?"https://image.tmdb.org/t/p/w500"+o:"http:/>/via.placeholder.com/1080x1500",'"\n                alt="').concat(i,'"/>\n            <div class="movie-info">\n                <h3>').concat(i.toUpperCase(),'</h3>\n                <div class="movie-details">\n                <div>').concat(f," | ").concat(a.slice(0,4),"</div>\n                </div>\n                  </div>\n                  "),b.addEventListener("click",(function(){!function(n){d.src="https://image.tmdb.org/t/p/w500/".concat(n.poster_path),l.textContent=n.title.toUpperCase(),r.innerHTML='\n      <span class="vote-avg">'.concat(n.vote_average.toFixed(1),"</span>")+"   /   "+n.vote_count,u.textContent=n.popularity.toFixed(1),m.textContent=n.original_title.toUpperCase();var i=n.genre_ids.map((function(t){var e=s.find((function(e){return e.id===t}));return e?e.name:""})).join(", ");g.textContent=i,p.textContent=n.overview,c.style.display="block",e=n.id,t=n.title}(n)})),E.appendChild(b)}))}function C(t){var e=h.split("?"),n=e[1].split("&"),i=n[n.length-1].split("=");if("page"!=i[0]){N(h+"&page="+t)}else{i[1]=t.toString();var o=i.join("=");n[n.length-1]=o;var a=n.join("&");N(e[0]+"?"+a)}}N(a),I.addEventListener("submit",(function(t){t.preventDefault();var e=S.value;N(e?"https://api.themoviedb.org/3/search/movie?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5&query="+e:a)})),x.addEventListener("click",(function(){0})),w.addEventListener("click",(function(){0})),v.addEventListener("click",(function(){i.includes(e)?alert("".concat(t," has been watched already")):i.push(e),localStorage.setItem("movie-watched",JSON.stringify(i))})),b.addEventListener("click",(function(){n.includes(e)?alert("".concat(t," has been added to the queue already")):n.push(e),localStorage.setItem("movie-queue",JSON.stringify(n))})),document.body.addEventListener("keydown",(function(t){"Escape"===t.code&&y()}));var q=20,J=document.querySelector(".pagination");function O(t){var e,n="";t<4?(e=1,1!=t&&(n+='<button class="pagination-button previous-page" \n    type="submit" id="prev">&#11164</button>')):e=t>=18?16:t-2,e>1&&(n+='<button class="pagination-button previous-page" type="submit" id="prev">&#11164</button>',n+='<button class="pagination-button" type="submit">1</button>',e>2&&(n+='<button class="pagination-button" type="submit">...</button>'));for(var i=e;i<=q&&i<e+5;i++)n+=i===t?'<button class="pagination-button current-page" type="submit">'.concat(i,"</button>"):'<button class="pagination-button" type="submit">'.concat(i,"</button>");e+5<=q&&(e+5<q&&(n+='<button class="pagination-button" type="submit">...</button>'),n+='<button class="pagination-button" type="submit">'.concat(q,"</button>")),t<q&&(n+='<button class="pagination-button next-page" type="submit" id="next">&#11166</button>'),J.innerHTML=n}var T=1;O(T),J.addEventListener("click",(function(t){var e=t.target;if(e.classList.contains("pagination-button")&&!e.id){var n=parseInt(e.textContent);isNaN(n)||(O(T=n),C(T))}else e.classList.contains("previous-page")?T>1&&(O(--T),C(T)):e.classList.contains("next-page")&&T<q&&(O(++T),C(T))}))}();
//# sourceMappingURL=library.e232998b.js.map
